{% extends "users/mypage_base.html" %}

{% block mobileView %}
<meta name="viewport" content="width=570, user-scalable=yes">
{% endblock %}

{% block contents %}

    {% load static %}
    <div id="jb-container">
        <div id="jb-header1">
            <img src="{%static 'img/users/logotop.png' %}" style="width: 1530px; height: 70px;">
            <button class="btn1" type="button" onclick="location.href='/'" style="opacity: 0;">버튼1</button>
        </div>

        <div id="jb-container2">
            <div id="jb-container2-content">
                <div class="" style="font-size:0.8em;">
                    <br>
                </div>
                <h5 style="margin: 0px; font-size: 1.5rem; font-family: '양진체';">&nbsp&nbsp&nbspMY PROFILE</h5>
            </div>
            <div id="jb-container2-content2">
                <form method="POST" novalidate>
                    {% csrf_token %}
                    <table style="font-size: 0.9em;">
                        <br>
                        <tr>
                            <td>
                                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp비밀번호:&nbsp&nbsp
                            </td>
                            <td>
                                {{ password_change_form.old_password }}
                                <script type="text/javascript">
                                    if (document.getElementsByName('old_password')[0].value != '') {
                                        document.getElementsByName('label_old_password')[0].setAttribute('class', 'active');
                                    }
                                </script>
                                {% if password_change_form.old_password.errors %}
                                <script type="text/javascript">
                                    document.getElementsByName('old_password')[0].setAttribute('class', 'form-control is-invalid')
                                </script>
                                {% for error in password_change_form.old_password.errors %}
                                <div class="invalid-feedback">
                                    <small>{{ error|slice:":20" }}</small>
                                </div>
                                {% endfor %}
                                {% else %} 
                                    <br>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp새 비밀번호:&nbsp&nbsp
                            </td>
                            <td>
                                {{ password_change_form.new_password1 }}
                                <script type="text/javascript">
                                    if (document.getElementsByName('new_password1')[0].value != '') {
                                        document.getElementsByName('label_new_password1')[0].setAttribute('class', 'active');
                                    }
                                </script>
                                {% if password_change_form.new_password1.errors %}
                                <script type="text/javascript">
                                    document.getElementsByName('new_password1')[0].setAttribute('class', 'form-control is-invalid')
                                </script>
                                {% for error in password_change_form.new_password1.errors %}
                                <div class="invalid-feedback">
                                    <small>{{ error }}</small>
                                </div>
                                {% endfor %}
                                {% else %} 
                                <br>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp새 비밀번호 확인:&nbsp&nbsp
                            </td>
                            <td>
                                {{ password_change_form.new_password2 }}
                                <script type="text/javascript">
                                    if (document.getElementsByName('new_password2')[0].value != '') {
                                        document.getElementsByName('label_new_password2')[0].setAttribute('class', 'active');
                                    }
                                </script>
                                {% if password_change_form.new_password2.errors %}
                                <script type="text/javascript">
                                    document.getElementsByName('new_password2')[0].setAttribute('class', 'form-control is-invalid')
                                </script>
                                {% for error in password_change_form.new_password2.errors %}
                                <div style="white-space: nowrap;" class="invalid-feedback">
                                    {% if forloop.counter < 2 %}
                                    {% if error|slice:":14" == "비밀번호가 너무 짧습니다." %}
                                    <small>{{ error|slice:":14" }}</small>
                                    {% else %}
                                    <small>{{error}}</small>
                                    {% endif %}
                                    {% endif %} 
                                </div>
                                {% endfor %}
                                {% else %} 
                                <br>
                                {% endif %}
                            </td>
                        </tr>

                    </table>

                    <div style="font-size: 0.6em;">
                        <br>
                    </div>
                    &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <button type="submit" class="btn btn-purple" style="font-family: 'paybooc-Bold';">변경하기</button>
                    &nbsp&nbsp&nbsp&nbsp
                    <a href="{% url 'users:mypage' %}" class="btn btn-red" style="font-family: 'paybooc-Bold';">변경취소</a>
                </form>

            </div>
            <div id="jb-container2-content3">
                <h1 style="font-size: 0.6em; color: #8C8C8C;">
                    <br><br><br>
                    &nbsp&nbsp더 나은 HUFSTUDY 사용을 위해 부탁드려요!</h1>
            </div>

        </div>
        <div id="jb-content2">
            <br>
            <h5 style="margin: 0px; font-size: 1.8rem; font-family: '양진체'; text-align: center;">Time Table</h5>
            
        </div>
        <div id="jb-content3">
            <br>
            <h5 style="margin: 0px; font-size: 1.8rem; font-family: '양진체'; text-align: center;">To Do List</h5>

        </div>

        <div class="btn-group" role="group" style="position: absolute; left:100px; top:585px;">
            <button class="btn btn-secondary" type="button">
                오류 신고
            </button> 
            <button class="btn btn-secondary" type="button" style="width: 158px;">
                ABOUT HUFSTUDY
            </button>
        </div>

    </div>

    <script type="text/javascript">
        function checkDisable(form) {
            if (form.ck.checked == true) {
                form.bt.disabled = false;
            } else {
                form.bt.disabled = true;
            }
        }
    </script>
    {% endblock %}
